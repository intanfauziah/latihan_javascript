<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kirim data dengan Ajax</title>
    <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<style>
    body{
        background-color:aliceblue;
    }
    input[type=text]{
    width: 25%;
    float: right;
    resize: vertical;
    padding: auto;
    margin-right: 65%;
}
    
</style>
</head>
<body>
    <h1 style="background-color: navy; color: white; height: 90px; padding: 20px;" >DEPARTMENTS</h1><br>
    <h2 style="padding: 20px;">Insert Data</h2><hr>
    <form style="padding: 20px;" method="POST" onsubmit="return sendData()">
        <p>
            <label>Department Name</label>
            <input type="text" id="departmentName" placeholder="Department Name" maxlength="30" required="required">
        </p>
        <p>
            <label>Manager ID</label>
            <input type="text" id="managerId" placeholder="Manager ID" maxlength="6">
        </p>
        <p>
            <label>Location ID</label>
            <input type="text" id="locationId" placeholder="Location ID" maxlength="4">
        </p>
        
        <input class="btn btn-primary" type="submit" value="Kirim" onclick="home.html" />
    </form>
    <a href='home.html'><button class="btn btn-primary" style="margin: 20px;">Back</button></a>
    

    <script>
        function sendData(){
            var xhr = new XMLHttpRequest();
            var url = "http://localhost:9093/departments/post"

            var data = JSON.stringify({
                departmentName: document.getElementById("departmentName").value,
                managerId: document.getElementById("managerId").value,
                locationId: document.getElementById("locationId").value
            });
            xhr.open("POST", url, true);
            xhr.setRequestHeader("Content-Type", "application/json;charset=UTF-8");
            xhr.onload = function(){
                var respon = JSON.parse(this.responseText);
                console.log(respon);
                if (respon.status){
                    window.location = "home.html";
                }
                else{
                    alert("Data gagal diinput");
                }
            };
            xhr.send(data);
                alert("Data berhasil diinput");
                return false;
        }
            
    </script>
    <!-- JavaScript Bundle with Popper -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
</body>
</html>